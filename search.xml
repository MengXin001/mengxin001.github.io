<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>处理中国地区BUFR探空数据</title>
      <link href="/tackle-bufr.html/"/>
      <url>/tackle-bufr.html/</url>
      
        <content type="html"><![CDATA[<h3 id="前情提要"><a href="#前情提要" class="headerlink" title="# 前情提要"></a># 前情提要</h3><p>由于种种不明因素<sup>???</sup>，官方渠道的探空数据进一步收紧。Wyoming极为便利的查询网站对于中国境内数据也多数缺少高空部分的数据，少部分渠道数据且用且珍惜。<img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/valine/aru/aru-17.gif" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/valine/aru/aru-17.gif" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""><br>CMA每天需要向各国共享基本站点的00/12Z探空数据，其中共享的数据格式为BUFR(数据质量很不错)。先前在Github搜寻一圈使用过ecmwf/eccodes（ECMWF’s GRIB and BUFR encoding/decoding library）进行处理，但对于进行探空可视化所需的读取过于繁杂。</p><p>前几天Pyy老师开源了<strong>CyanideCN/TaxolLib</strong>包含许多的Libs，其中的 <code>upperair_bufr.py</code> 使用pybufrkit进行读取，已经预先处理好了各类要素的编号，大大减轻了处理负担。  </p><p>稍做处理返回要素数据，配套<code>metpy</code>库可以计算各类指数。</p><pre><code>    def get_data(self, station_id):            df = self.query(station_id)            pres = df[&#39;pressure&#39;]            temp = df[&#39;temperature&#39;]            dwpt = df[&#39;dewpoint&#39;]            wdir = df[&#39;wind_direction&#39;]            wspd = df[&#39;wind_speed&#39;]            alt = df[&#39;geopotential&#39;]            return pres, temp, dwpt, wdir, wspd, alt</code></pre><pre><code>Sounding = SoundingDecoder(&#39;C:/Users/Administrator/Desktop/Sat/SatData/Upper_air/A_IUKN09BABJ300000_C_RJTD_20220130013517_60.bufr&#39;)data = Sounding.query(&quot;52836&quot;)pres, temp, dwpt, wdir, wspd, alt = Sounding.get_data(&quot;52836&quot;)print(alt)</code></pre><p>同时也可以使用<code>to_sharppy</code>直接生成SHARPPy格式的探空数据，丢入SHARPPy绘制分析。</p><pre><code>import datetimedate = &quot;2022013001351&quot;dtime = datetime.datetime.strptime(date, &#39;%Y%m%d%H%M%S&#39;)outdir = &#39;C:/Users/Administrator/Desktop/Sat/SatData/Upper_air&#39;Sounding = SoundingDecoder(&#39;C:/Users/Administrator/Desktop/Sat/SatData/Upper_air/A_IUKN09BABJ300000_C_RJTD_20220130013517_60.bufr&#39;)out = Sounding.to_sharppy(&quot;52836&quot;, dtime, outdir)</code></pre><p>这里贴一份upperair_bufr.py，还请大家给Pyy老师一个Star！<a href="https://github.com/CyanideCN/TaxolLib/blob/main/upperair_bufr.py" target="_blank" rel="noopener"><strong>CyanideCN/TaxolLib</strong></a></p><pre><code># https://github.com/CyanideCN/TaxolLib/blob/main/upperair_bufr.pyimport osfrom pybufrkit.dataquery import NodePathParser, DataQuerentfrom pybufrkit.decoder import Decoderimport numpy as npfrom pandas import DataFramedef dump_msg(msg):    return np.array(list(msg.values())[0][0], float).ravel()def safe_number(arr):    nanpos = np.isnan(arr)    arr_new = arr.copy()    if nanpos.any():        arr_new[nanpos] = -9999    return arr_newdef decimal_fmt(num):    return &#39;{:.2f}&#39;.format(num)def format_str(tup):    tup = map(decimal_fmt, tup)    fmt = &#39;{:&gt;7},{:&gt;10},{:&gt;10},{:&gt;10},{:&gt;10},{:&gt;10}\n&#39;.format(*tup)    return fmtclass SoundingDecoder(object):    CODE_PRES = &#39;007004&#39;    CODE_TMP = &#39;012101&#39;    CODE_TD = &#39;012103&#39;    CODE_HGT = &#39;010009&#39;    CODE_WDIR = &#39;011001&#39;    CODE_WSPD = &#39;011002&#39;    CODE_BLOCK = &#39;001001&#39;    CODE_ID = &#39;001002&#39;    def __init__(self, file):        decoder = Decoder()        f = open(file, &#39;rb&#39;)        self.msg = decoder.process(f.read())        f.close()        self.id_list = self._station_list()    def _station_list(self):        q = DataQuerent(NodePathParser())        wmo_block = q.query(self.msg, self.CODE_BLOCK).results        wmo_id = q.query(self.msg, self.CODE_ID).results        def ravel(l):            return [i for j in l for i in j]        id_list = [str(i) + str(j).zfill(3) for i, j in zip(ravel(wmo_block.values()), ravel(wmo_id.values()))]        return np.array(id_list)    def _query(self, subset_num):        TEMPLATE = &#39;@[{}] &gt; {}&#39;        q = DataQuerent(NodePathParser())        df = DataFrame()        pres_msg = q.query(self.msg, TEMPLATE.format(subset_num, self.CODE_PRES)).results        df[&#39;pressure&#39;] = dump_msg(pres_msg) / 100        tmp_msg = q.query(self.msg, TEMPLATE.format(subset_num, self.CODE_TMP)).results        df[&#39;temperature&#39;] = dump_msg(tmp_msg) - 273.15        td_msg = q.query(self.msg, TEMPLATE.format(subset_num, self.CODE_TD)).results        df[&#39;dewpoint&#39;] = dump_msg(td_msg) - 273.15        hgt_msg = q.query(self.msg, TEMPLATE.format(subset_num, self.CODE_HGT)).results        df[&#39;geopotential&#39;] = dump_msg(hgt_msg)        wdir_msg = q.query(self.msg, TEMPLATE.format(subset_num, self.CODE_WDIR)).results        df[&#39;wind_direction&#39;] = dump_msg(wdir_msg)        wspd_msg = q.query(self.msg, TEMPLATE.format(subset_num, self.CODE_WSPD)).results        df[&#39;wind_speed&#39;] = dump_msg(wspd_msg)        # Basic QC        df = df.fillna(value={&#39;dewpoint&#39;:-9999}) # Fill missing dewpoint at high levels        df = df.interpolate(method=&#39;linear&#39;, limit_direction=&#39;forward&#39;, axis=0).drop_duplicates(&#39;geopotential&#39;).sort_values(by=&#39;geopotential&#39;)        return df.fillna(-9999) # Fill Nans in starting level    def query(self, station_id):        if station_id not in self.id_list:            raise ValueError(&#39;Station not found&#39;)        id_idx = (station_id == self.id_list).nonzero()        subset_num = id_idx[0][0]        return self._query(subset_num)    def to_sharppy(self, station_id, dtime, outdir):        df = self.query(station_id)        fname = &#39;SKEWT_&#39; + dtime.strftime(&#39;%Y%m%d%H0000&#39;) + &#39;_&#39; + station_id +&#39;.txt&#39;        outpath = os.path.join(outdir, fname)        f = open(outpath, &#39;w&#39;)        f.write(&#39;%TITLE%\n&#39;)        f.write(&#39; {}   {}\n\n&#39;.format(station_id, dtime.strftime(&#39;%y%m%d/%H%M&#39;)))        f.write(&#39;   LEVEL       HGHT       TEMP       DWPT       WDIR       WSPD\n&#39;)        f.write(&#39;-------------------------------------------------------------------\n&#39;)        f.write(&#39;%RAW%\n&#39;)        for data in zip(safe_number(df[&#39;pressure&#39;]), safe_number(df[&#39;geopotential&#39;]),                        safe_number(df[&#39;temperature&#39;]), safe_number(df[&#39;dewpoint&#39;]),                        safe_number(df[&#39;wind_direction&#39;]), safe_number(df[&#39;wind_speed&#39;] * 1.9438)):            formatted = format_str(data)            f.write(formatted)        f.write(&#39;%END%&#39;)        f.close()        return outpath</code></pre>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2021年，再会！</title>
      <link href="/end-2021.html/"/>
      <url>/end-2021.html/</url>
      
        <content type="html"><![CDATA[<h1 id="二〇二一"><a href="#二〇二一" class="headerlink" title="二〇二一"></a>二〇二一</h1><p>现在是北京时间（CCT）2021年12月31日19点40分，春来秋往，岁月峥嵘，数小时后2021年就要从东八时区上消逝了。借此给这一年留下一些什么吧。</p><h2 id="我的2021"><a href="#我的2021" class="headerlink" title="# 我的2021"></a># 我的2021</h2><p>2021年经历了风平浪静甚至些许顺风而行的上半年，下半年则可以说给了我一个措手不及。整个下半年可以说是在无止尽忙碌中度过的，每每当我想要做一件安排之外的事情时，才发现我几乎挤不出那么一些许时间让自己沉静下来。<br>我多次在心中问到”已经有多久没有真正去动笔算一算那些物理题了”。每次看到陌生的公式，我都想以”太难计算”等理由劝说自己。但事实上竞赛的试题对于计算的考察很小，循环往复的如此下去把自己困在了”万题开算难”之中。此外，是否最后要选择竞赛对于我来说仍不是一个确数，着实让我难以抉择。这盖不是什么好现象罢……<br>2021年运转了抢铁的广深港，运转了深圳的内燃天堂深圳西平南铁路。广州之旅还是相当不错的体验，乘坐Line18以<code>160KM/H</code>的在广州的地下穿梭……<br>2021年观测到了人生中第一朵云砧，超级迷你单体（积雨云全貌），浓积云消散后幡状云下的彩虹，过境校园的积雨云……<br>2021年和多位深气爱群友面基，观光了石岩基地和气象观测梯度塔（再次感谢小编）……<br>2021年结束了高中历史化学政治的学习生涯，以后和这三门学科估看也不会再有什么交集罢……<br>2021年进步，不足和遗憾仍然共存 Just Go Go</p><h2 id="气象"><a href="#气象" class="headerlink" title="# 气象"></a># 气象</h2><ul><li>4月 SURIGAE</li><li>4月30日的傍晚时分华东地区（江苏-上海）一场飑线拉开夏季强对流的序幕。超级单体循环&amp;阵风锋</li><li>5月4日广东首场大范围飑线</li><li>5月14日武汉&amp;江苏盛泽龙卷风</li><li>6月22日广东暖区暴雨</li><li>6月25日内蒙古自治区锡林郭勒盟太仆寺旗龙卷风</li><li>7月20日郑州特大暴雨&amp;IN-FA，<code>201.9mm</code><img src="https://gitee.com//MengXin546/CDN/raw/master/img/IMG_4221.PNG" class="lazyload" data-srcset="https://gitee.com//MengXin546/CDN/raw/master/img/IMG_4221.PNG" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""></li><li>8月4日湛江超级单体</li><li>8月23日绥化强对流</li><li>8月26日华东飑线</li><li>9月 CHANTHU</li><li>9月30日大连夜间超级单体</li><li>10月 LIONROCK&amp;KOMPASU圆规规</li></ul><p><strong><em>站在2021年最后这一时刻来看不论是在今年的河南特大暴雨中还是各场风暴过后，每一刻每一分都有着人们奉献与坚守，担当与拼搏的背影，他们在台前幕后默默守护着我们头顶这片浩瀚天空。相知冷暖，共度风雨，来年再会！</em></strong></p><p>更多记录还请等待<a href="https://www.xinmoe.cn/meteorological-logs.html/"><strong><em>meteorological-logs</em></strong></a>和2020-2021回顾的更新。</p><center>再见，2021！新年快乐</center>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>处理HY2/CFOSAT卫星SCA L2B数据</title>
      <link href="/process-scat.html/"/>
      <url>/process-scat.html/</url>
      
        <content type="html"><![CDATA[<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="# Introduction"></a># Introduction</h2><h3 id="HaiYang-2-1"><a href="#HaiYang-2-1" class="headerlink" title="HaiYang 2 [1]"></a><strong>HaiYang 2</strong> <sup>[1]</sup></h3><p>Operational Sat: HY-2B/HY-2C/HY-2D flying on Sunsynchronous orbit<br>Instrument: SCAT (sso)<br>Best quality: 50 km resolution; standard quality: 25 km resolution.<br>Ku-band (13.25 GHz).  Near-global every day.  </p><h3 id="Chinese-French-Oceanography-Satellite-2"><a href="#Chinese-French-Oceanography-Satellite-2" class="headerlink" title="Chinese-French Oceanography Satellite [2]"></a><strong>Chinese-French Oceanography Satellite</strong> <sup>[2]</sup></h3><p>Instrument: SCAT (CFOSAT)<br>High quality data: 50 km resolution. Basic sampling: 10 km resolution.<br>Rotating Fan-beam Scatterometer (RFSCAT). Ku-band (13.256 GHz), dual polarisation (HH and VV).  Global in one week.</p><h2 id="Read"><a href="#Read" class="headerlink" title="# Read"></a># Read</h2><p>国家卫星海洋应用中心已通过实时FTP分发<code>HY-2B/2C/CFOSAT</code>卫星数据。<br>HaiYang 系列卫星分发的SCA L2B数据为HDF5格式，CFOSAT 则为NetCDF格式。<br>在处理方式上海洋中心对HY卫星的处理为<code>OPER业务处理</code>而CFOSAT同时分发<code>OPER业务处理</code>和<code>EXPR快交付</code>两种，数据读取上有差异。此处只使用EXPR快交付产品。  </p><h3 id="Wind-amp-Direction"><a href="#Wind-amp-Direction" class="headerlink" title="Wind &amp; Direction"></a>Wind &amp; Direction</h3><pre><code class="python">import h5pyimport netCDF4hy = h5py.File(&quot;H2B_OPER_SCA_L2B_OR_20210828T225139_20210829T003602_14257_pwp_250_07_owv.h5&quot;, &quot;r&quot;)cfo = netCDF4.Dataset(&quot;CFO_EXPR_SCA_C_L2B_OR_20210723T100441_15127_125_33_owv.nc&quot;)lats = cfo.variables[&#39;wvc_lat&#39;][:]lons = cfo.variables[&#39;wvc_lon&#39;][:] wind_speed = cfo.variables[&#39;wind_speed_selection&#39;][:]wind_dir = cfo.variables[&#39;wind_dir_selection&#39;][:]u = (wind_speed * np.sin(np.radians(wind_dir))v = (wind_speed * np.cos(np.radians(wind_dir))</code></pre><p><strong>注意:</strong>  </p><ul><li><p><strong>使用<code>wind_dir_selection</code>而不是<code>wind_dir</code>以绘制正确风向</strong>  </p></li><li><p><strong><code>wind_dir_selection</code>中的方向不再需要 - 180deg</strong>  </p></li></ul><h2 id="Plot"><a href="#Plot" class="headerlink" title="# Plot"></a># Plot</h2><p>BigShuiTai Plotter <a href="https://github.com/BigShuiTai/HY-CFOSAT-ASCAT-Wind-Data-Plotter" target="_blank" rel="noopener">https://github.com/BigShuiTai/HY-CFOSAT-ASCAT-Wind-Data-Plotter</a> (请等待使用正式发布的Version 1.0.0)<br>更多个性化设置详见Readme。<br>See <a href="https://github.com/BigShuiTai/HY-CFOSAT-ASCAT-Wind-Data-Plotter/issues/4" target="_blank" rel="noopener">https://github.com/BigShuiTai/HY-CFOSAT-ASCAT-Wind-Data-Plotter/issues/4</a><br><img src="/img/H2C_OPER_SCA_L2B_OR_20211010T000404_20211010T004830_05258_pwp_250_07_owv.png" class="lazyload" data-srcset="/img/H2C_OPER_SCA_L2B_OR_20211010T000404_20211010T004830_05258_pwp_250_07_owv.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> Meteorology </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HY2 </tag>
            
            <tag> CFOSAT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>配置气象云图绘图工具-Satpy</title>
      <link href="/use-satpy.html/"/>
      <url>/use-satpy.html/</url>
      
        <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>在网上新寻找到的一款工具，目前绘制FY-4A/FY-3D/Sentinel3/<br>参考<a href="https://github.com/zxdawn" target="_blank" rel="noopener">朝曦dawn</a> &amp; <a href="https://satpy.readthedocs.io/en/stable/overview.html" target="_blank" rel="noopener">官方Doc</a></p><ul><li>支持多种合成产品:雾；沙尘；真彩色等</li></ul><h3 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h3><p>为了确保安装正确，请使用<code>conda</code>; 下载 <a href="https://docs.conda.io/en/latest/miniconda.html" target="_blank" rel="noopener">Miniconda</a></p><pre><code>$ conda create -c conda-forge -n my_satpy_env python satpy$ conda activate my_satpy_env</code></pre><h3 id="Start"><a href="#Start" class="headerlink" title="Start"></a>Start</h3><p>绘制全圆盘真彩色图像。准备一份FY-4A的4KM全圆盘L1数据。</p><pre><code class="Python">import os, globfrom satpy.scene import Scenefilenames = glob.glob(&#39;C://Users/Moe/Desktop/FY4A-_AGRI*4000M_V0001.HDF&#39;)scn = Scene(filenames, reader=&#39;agri_l1&#39;)composite = &#39;true_color&#39;scn.load([composite])scn.save_dataset(composite, \filename=&#39;{sensor}_{name}.png&#39;)</code></pre><h3 id="单通道绘制示例"><a href="#单通道绘制示例" class="headerlink" title="单通道绘制示例"></a>单通道绘制示例</h3><p>使用Satpy自带的<code>scn.crop</code>框定区域，与使用投影相比使用范围会受到限。</p><pre><code class="Python">channel = &quot;C02&quot;filenames = glob.glob(&#39;C:/Users/Administrator/Desktop/FY4A*&#39;)scn = Scene(filenames, reader=&#39;agri_l1&#39;)scn.load([channel])lonmin, latmin, lonmax, latmax = 115, 32, 130, 47scn_c = scn.crop(ll_bbox=(lonmin, latmin, lonmax, latmax))sat_w_tb_vis = scn_c[Channel].valuesarea_def = scn_c[Channel].attrs[&#39;area&#39;]crs = area_def.to_cartopy_crs()fig, ax = plt.subplots(subplot_kw=dict(projection=ccrs.PlateCarree()))ax.set_extent([lonmin, lonmax, latmin, latmax], crs=ccrs.PlateCarree())img = plt.imshow(sat_w_tb_vis, origin=&#39;upper&#39;, cmap=plt.cm.binary_r, extent=crs.bounds, transform=crs)plt.savefig(&#39;4A_AGRI.png&#39;, dpi=300, bbox_inches=&#39;tight&#39;)</code></pre><hr><h3 id="拓展阅读"><a href="#拓展阅读" class="headerlink" title="拓展阅读"></a>拓展阅读</h3><ul><li><strong>More Useful Skills</strong> <a href="https://www.dapiya.top/?p=71" target="_blank" rel="noopener">https://www.dapiya.top/?p=71</a></li><li><strong>Dealing with the problem when lon &gt; 180</strong> <a href="https://github.com/pytroll/satpy/issues/1828" target="_blank" rel="noopener">https://github.com/pytroll/satpy/issues/1828</a></li></ul><p><img src="https://gitee.com//MengXin546/CDN/raw/master/img/FengYun-4A_cartopy_202110210630.jpg" class="lazyload" data-srcset="https://gitee.com//MengXin546/CDN/raw/master/img/FengYun-4A_cartopy_202110210630.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> Meteorology </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>配置气象云图绘图工具2.0-SatimaV4</title>
      <link href="/use-satima.html/"/>
      <url>/use-satima.html/</url>
      
        <content type="html"><![CDATA[<h2 id="关于"><a href="#关于" class="headerlink" title="关于"></a>关于</h2><p>SatimaV4由<a href="https://github.com/CyanideCN/SatimaV4" target="_blank" rel="noopener">CyanideCN</a>制作，在Linux和Windows均可实现高效的对Himawari8的DAT数据进行绘制，自带了15种色阶。<br>支持Himawari8，FY-3D等卫星数据绘制</p><pre><code>//自带色阶1.CA 2.NRL89 3.RAMMB 4.CC 5.CWBM 6.O 7.BD 8.RBTOP 9.NHC 10.RB 11.MB 12.AVN 13.BDCOLOR 14.COLOR 15.BW</code></pre><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h3><ul><li>Python 3.6+</li><li>Pip3</li></ul><h3 id="必备库"><a href="#必备库" class="headerlink" title="必备库"></a>必备库</h3><p>建议使用华为云开源镜像站作为Pypi安装的软件源，<a href="https://mirrors.huaweicloud.com/" target="_blank" rel="noopener">方法见</a></p><pre><code class="BASH">sudo apt-get updatesudo apt-get install proj  # Proj 4.9.0</code></pre><pre><code class="Python">dask   #可能需要执行 pip3 install &quot;dask[array]&quot; --upgradetoolznumpynetCDF4matplotlib==3.3.3cartopy==0.18.0</code></pre><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><pre><code class="bash">git clone https://github.com/CyanideCN/SatimaV4.git</code></pre><p>安装<code>Courier New</code>字体到系统中，没有该字体也不会影响正常出图。<br><code>Cartopy</code>将会从naciscdn获取海岸线数据，在国内访问速度较慢。建议手动下载文件并解压放置于自己当前用户的<code>/home/pi/.local/share/cartopy/shapefiles/natural_earth/physical</code>路径，Ps:用户名记得改成自己的！<a href="https://cdn.jsdelivr.net/gh/MengXin001/CDN@1.8.0.2/safe/ne_10m_coastline.zip" target="_blank" rel="noopener">CoastLine国内下载链接</a><br>核对文件</p><pre><code>pi@nanopik2-s905:~$ cd /home/pi/.local/share/cartopy/shapefiles/natural_earth/physicalpi@nanopik2-s905:~/.local/share/cartopy/shapefiles/natural_earth/physical$ lsne_10m_coastline.cpg  ne_10m_coastline.dbf  ne_10m_coastline.prj  ne_10m_coastline.README.html  ne_10m_coastline.shp  ne_10m_coastline.shx  ne_10m_coastline.VERSION.txt</code></pre><p>存档一份H8DAT数据（在P-TREE或NICT下载）进入到SatimaV4目录。</p><pre><code class="Python">pi@nanopik2-s905:~$ cd /Desktop/SatimaV4pi@nanopik2-s905:~/Desktop/SatimaV4$ python3 Satima.py # 运行Loaded module satima.satellites.abiLoaded module satima.satellites.ahiLoaded module satima.satellites.mersiLoaded module satima.satellites.microwaveLoaded module satima.satellites.viirs----------------------------SatimaV4 restructured by PY. Version 1.0----------------------------Enter data directory, press enter to use current directory: /home/pi/Desktop/SatimaV4  # 输入数据所在目录(绝对路径)1.[H8][TARGET] 2020.12.20 07:45 # 显示数据信息Enter file index: 1 # 选择绘制数据序号[IR][BAND13] # 数据通道1.CA 2.NRL89 3.RAMMB 4.CC 5.CWBM 6.O 7.BD 8.RBTOP 9.NHC 10.RB 11.MB 12.AVN 13.BDCOLOR 14.COLOR 15.BW # 自带色阶Enter image options, separated by comma: 1# 选择色阶Task(band=13, georange=None, cmap=&#39;CA&#39;)findfont: Font family [&#39;Courier New&#39;] not found. Falling back to DejaVu Sans.20.620737233577472# 绘制完成，输出在数据同一目录</code></pre><h3 id="合成真彩色产品"><a href="#合成真彩色产品" class="headerlink" title="合成真彩色产品"></a>合成真彩色产品</h3><p>准备Himawari8的Band1，Band2，Band3数据<br>选择[RGB]中的[True_Color]即可合成。此处仅支持CPU单核绘制可能需要较长时间，同时建议使用大内存平台运行。</p>]]></content>
      
      
      <categories>
          
          <category> Meteorology </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Himawari8 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OPQBot说明文档备份</title>
      <link href="/opqbot-readme.html/"/>
      <url>/opqbot-readme.html/</url>
      
        <content type="html"><![CDATA[<p>IOTBOT –为跨平台而生</p><p><strong>运行在Mac平台</strong></p><p><img src="https://camo.githubusercontent.com/77144e212578e053a1ad14f888d4d53191c578fa/68747470733a2f2f73322e617831782e636f6d2f323031392f30392f30342f6e5a376744782e706e67" class="lazyload" data-srcset="https://camo.githubusercontent.com/77144e212578e053a1ad14f888d4d53191c578fa/68747470733a2f2f73322e617831782e636f6d2f323031392f30392f30342f6e5a376744782e706e67" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="MAC"></p><p><strong>运行在树莓派3B+ 1G RAM</strong></p><p><img src="https://camo.githubusercontent.com/754ac0f4716f4b4088fd1ba87b8535f78a6b5ac1/68747470733a2f2f73312e617831782e636f6d2f323032302f30342f31312f47484658336e2e706e67" class="lazyload" data-srcset="https://camo.githubusercontent.com/754ac0f4716f4b4088fd1ba87b8535f78a6b5ac1/68747470733a2f2f73312e617831782e636f6d2f323032302f30342f31312f47484658336e2e706e67" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="树莓派"></p><p><strong>运行在电视盒子 N1</strong><br><img src="https://camo.githubusercontent.com/fa9594a6577f447bd97f33ac40ca2a824fe5dd6b/68747470733a2f2f73322e617831782e636f6d2f323031392f31302f30332f75304e7765502e706e67" class="lazyload" data-srcset="https://camo.githubusercontent.com/fa9594a6577f447bd97f33ac40ca2a824fe5dd6b/68747470733a2f2f73322e617831782e636f6d2f323031392f31302f30332f75304e7765502e706e67" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="电视盒子"><br><img src="https://camo.githubusercontent.com/32c5b864b035a04b094bf77de272b1fa6336434e/68747470733a2f2f73322e617831782e636f6d2f323031392f31302f30332f75304e4946552e706e67" class="lazyload" data-srcset="https://camo.githubusercontent.com/32c5b864b035a04b094bf77de272b1fa6336434e/68747470733a2f2f73322e617831782e636f6d2f323031392f31302f30332f75304e4946552e706e67" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="电视盒子"></p><p><strong>运行在路由器HIWI-FI</strong></p><p><img src="https://camo.githubusercontent.com/139a303674c16c57c98e94fc729cd17094127214/68747470733a2f2f73322e617831782e636f6d2f323031392f31302f30332f75304e76544b2e6d642e706e67" class="lazyload" data-srcset="https://camo.githubusercontent.com/139a303674c16c57c98e94fc729cd17094127214/68747470733a2f2f73322e617831782e636f6d2f323031392f31302f30332f75304e76544b2e6d642e706e67" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="路由器"></p><h3 id="⚠️使用协议⚠️"><a href="#⚠️使用协议⚠️" class="headerlink" title="⚠️使用协议⚠️"></a>⚠️使用协议⚠️</h3><ul><li><strong>IOTBOT 不得用于包括且不限于<del>赌博、色情、云盘、政治</del> 等网络违法违规服务，违者必究</strong></li><li><strong>用户不得使用 IOTBOT 来进行批量业务，如：批量加群，加好友等。</strong></li><li><strong>用户在使用本软件过程中，应遵守当地法律法规与深圳市腾讯计算机系统有限公司用户协议中相关行为规范，且用户不能使用本软件进行以下行为，包括但不限于：广告传播、黑产、黄、赌、毒、PC蛋蛋、北京赛车、黑色产业、灰色产业、算账下注、群发、批量加群等任何违法犯罪或与犯罪相关，用户使用本软件进行相关违法犯罪的行为，均应由用户自行承担，IOTQQ不对用户的任何言行与行为承担任何责任</strong></li><li><strong>免责声明：IOTBOT 软件是一款基于MacQQ协议的AI机器人软件，主要用于活跃QQ群气氛、管理群、群内娱乐活动等，协议版权归属于深圳市腾讯计算机系统有限公司所有， 如有侵权请联系邮箱(<a href="mailto:1700487478@qq.com">1700487478@qq.com</a>)，将会对软件下架并删除相关内容。</strong></li></ul><h3 id="🆕树莓派运行展示🆕"><a href="#🆕树莓派运行展示🆕" class="headerlink" title="🆕树莓派运行展示🆕"></a>🆕树莓派运行展示🆕</h3><ul><li>**<a href="/">Null</a> </li></ul><hr><table><thead><tr><th>IOTBOT 功能</th><th>Free  ⬆️</th></tr></thead><tbody><tr><td><code>好友消息 收发语音文字图文XML/JSON</code></td><td>✅</td></tr><tr><td><code>群组消息 收发语音文字图文XML/JSON</code></td><td>✅</td></tr><tr><td><code>私聊消息 收发语音文字图文XML/JSON</code></td><td>✅</td></tr><tr><td><code>QQ空间发图文</code></td><td>❌</td></tr><tr><td><code>群 邀请/踢人/加群</code></td><td>✅</td></tr><tr><td><code>好友 通过/拒绝/加人</code></td><td>✅</td></tr><tr><td><code>账号 登陆</code></td><td>❌</td></tr><tr><td><code>多账号 登陆</code></td><td>❌</td></tr></tbody></table><p><strong>项目介绍</strong></p><ul><li>⚠️ 授权登陆此网站换取Token <a href="https://developer.gitter.im/apps" target="_blank" rel="noopener">Gitter Developer</a></li></ul><ul><li><strong>🆓</strong></li><li><strong>🌞采用独特的插件机制 –Lua</strong></li><li><strong>🌞提供WebSocket （SocketIO）</strong></li><li><strong>🌞提供Web API</strong></li><li><strong>🌞内置协程池 高效 稳定 迸发</strong></li><li><strong>🌞完成了大部分核心接口 其他必要接口将后续更新 可在<a href="https://github.com/IOTQQ/IOTQQ/issues" target="_blank" rel="noopener">issues</a>中提出 bug or todo</strong></li><li><strong>不断电稳定运行 0 崩 错误日志将会在log中体现</strong></li></ul><h4 id="💗开启运行之旅"><a href="#💗开启运行之旅" class="headerlink" title="💗开启运行之旅"></a>💗开启运行之旅</h4><hr><p><strong>1⃣️下载对应平台版本的二进制包 <a href="https://gitter.im/IOTQQTalk/IOTQQ" target="_blank" rel="noopener">传送门</a></strong></p><p><strong>2⃣️申请Gitter Developer 可用GitHub 授权登陆Gitter Developer 网站 换取Token</strong></p><p><img src="https://camo.githubusercontent.com/b00bfed9f220fcb0cdeb8fb50b51875ac732b9ef/68747470733a2f2f73312e617831782e636f6d2f323032302f30342f31312f4748437168522e6a7067" class="lazyload" data-srcset="https://camo.githubusercontent.com/b00bfed9f220fcb0cdeb8fb50b51875ac732b9ef/68747470733a2f2f73312e617831782e636f6d2f323032302f30342f31312f4748437168522e6a7067" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""></p><p><strong>3⃣️填写配置文件CoreConf.conf  首先配置Token 后启动程序</strong></p><pre><code>  #自定义监听服务端口  Port = &quot;0.0.0.0:8888&quot;  #工作线程 默认50  WorkerThread = 50  #IOTBOT版本  IOTQQVer = &quot;v3.0.0&quot;  #Gitter Token  Token = &quot;&quot;</code></pre><p><img src="https://camo.githubusercontent.com/e74c156fca18fe94ae211bcd0a8bd9604aa94a98/68747470733a2f2f73312e617831782e636f6d2f323032302f30342f31312f4748434f39312e6a7067" class="lazyload" data-srcset="https://camo.githubusercontent.com/e74c156fca18fe94ae211bcd0a8bd9604aa94a98/68747470733a2f2f73312e617831782e636f6d2f323032302f30342f31312f4748434f39312e6a7067" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""></p><p><strong>4⃣️运行程序 执行命令 <code>./IOTQQ</code> 默认开启8888端口作为WebSokcet/WebApi的服务端口</strong></p><p><code>首次登陆会拉取部分脚本并有详细输出 当出现 Everything is ok! 说明服务就绪 获取登陆二维码 访问Url http://IP:PORT/v1/Login/GetQRcode 扫码登陆即可</code></p><p><strong>5⃣️控制面板 精力有限 UI可能存在大量BUG 请自行修复 访问<a href="http://IP:PORT">http://IP:PORT</a></strong></p><p><img src="https://camo.githubusercontent.com/6600166bc0504b9cbdca07ba7967fb25a174b02d/68747470733a2f2f6674702e626d702e6f76682f696d67732f323032302f30342f396435346339383761323731613939302e706e67" class="lazyload" data-srcset="https://camo.githubusercontent.com/6600166bc0504b9cbdca07ba7967fb25a174b02d/68747470733a2f2f6674702e626d702e6f76682f696d67732f323032302f30342f396435346339383761323731613939302e706e67" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""></p><hr><h3 id="🆒Lua相关API"><a href="#🆒Lua相关API" class="headerlink" title="🆒Lua相关API"></a>🆒Lua相关API</h3><h6 id="WebPlugin-APi"><a href="#WebPlugin-APi" class="headerlink" title="WebPlugin APi"></a>WebPlugin APi</h6><ul><li>请勿修改 WebPlugins目录下的任意文件名以及文件内容的函数名 否则部分WebAP接口会失效</li></ul><p><a href="https://github.com/OPQBot/OPQ" target="_blank" rel="noopener">详细介绍请移步</a></p><h6 id="Plugin-APi"><a href="#Plugin-APi" class="headerlink" title="Plugin APi"></a>Plugin APi</h6><ul><li>插件命名不受限制 xxx.lua 但是必须实现以下函数 </li></ul><pre><code class="lua">--收到好友/私聊消息触发该函数--CurrentQQ 响应消息的QQ--data 消息数据 function ReceiveFriendMsg(CurrentQQ, data)    return 1 --1 继续处理后续插件 2 不在处理后续插件end--收到群消息触发该函数function ReceiveGroupMsg(CurrentQQ, data)    return 1end--收到所有相关事件的集合 如群成员进群退群管理升降消息撤回、好友撤回删除等事件function ReceiveEvents(CurrentQQ, data, extData)    return 1end</code></pre><p><a href="https://github.com/OPQBot/OPQ" target="_blank" rel="noopener">详细介绍请移步</a></p><ul><li>相关APi用法请查阅Plugins目录下的相关文件调用例程 这里不再赘述</li></ul><hr><h6 id="WebSocket-APi"><a href="#WebSocket-APi" class="headerlink" title="WebSocket APi"></a>WebSocket APi</h6><ul><li><p><strong>实现的功能比较少只做了几个 配合WebAPI 实现 webQQ 易如反掌</strong></p></li><li><p><strong>给出部分js代码</strong></p></li></ul><pre><code class="javascript">&lt;script&gt;    var User = localStorage.getItem(&#39;User&#39;);     var socket = io(&quot;127.0.0.1:8888&quot;, {      transports: [&#39;websocket&#39;]    });    socket.on(&#39;connect&#39;,    function() {        //从缓存或从cookies 读取历史登陆的QQ号        //链接成功后获取用户缓存 获取成功后直接同步消息 失败直接获取二维码        //同一浏览器会置换当前的websocket id      if (User == null){      //获取二维码      socket.emit(&#39;GetQrcode&#39;, &#39;1234&#39;, (data) =&gt;{      console.log(data); // data will be &#39;woot&#39;      var JsonPkg = JSON.parse(data);      $(&#39;#qrcode&#39;).attr(&quot;src&quot;, &#39;data:image/png;base64,&#39; + JsonPkg.Data.BQrpic);       });      }else{        socket.emit(&#39;GetWebConn&#39;, User, (data) =&gt;{        console.log(data);        $(&#39;#qrcode&#39;).attr(&quot;src&quot;, &#39;http://q1.qlogo.cn/g?b=qq&amp;nk=&#39; + User + &#39;&amp;s=640&#39;);      });      }    })    socket.on(&#39;OnCheckLoginQrcode&#39;,    function(data) {      //48未扫描 53已扫码 17 49 过期了      // if (data.Data.ScanStatus ==17 || data.Data.ScanStatus == 49){      // }        console.log(data);    });    socket.on(&#39;OnLoginSuccess&#39;,    function(data) {      // 移除所有      localStorage.clear();      console.log(data);      $(&#39;#qrcode&#39;).attr(&quot;src&quot;, &#39;http://q1.qlogo.cn/g?b=qq&amp;nk=&#39; + data.Uin + &#39;&amp;s=640&#39;);      localStorage.setItem(&#39;User&#39;, data.Uin);      localStorage.setItem(&#39;Nick&#39;, data.Nick);    });    //统一事件管理如好友进群事件 好友请求事件 退群等事件集合    socket.on(&#39;OnEvents&#39;, function (data) {      console.log(&quot;收到相关事件&quot;);      console.log(JSON.stringify(data));    });    //收到好友消息的回调事件    socket.on(&#39;OnFriendMsgs&#39;, function (data) {      console.log(&quot;收到好友消息&quot;);      console.log(data);      console.log(JSON.stringify(data))    });    //收到群消息的回调事件    socket.on(&#39;OnGroupMsgs&#39;, function (data) {      console.log(&quot;收到群消息&quot;);      console.log(data);      console.log(JSON.stringify(data))    });&lt;/script&gt; </code></pre><h3 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h3><ul><li><strong>😄登陆成功后在手机端回复电脑 systeminfo可查看相关收发包等信息</strong></li><li><strong>😄访问URL :<a href="http://IP:PORT/v1/ClusterInfo">http://IP:PORT/v1/ClusterInfo</a> 可以查询相关信息</strong></li><li><strong>😄集群模式暂未开放</strong></li><li><strong>😄多账号登陆需授权</strong></li></ul><h4 id="❤️以下文章或项目排名不分先后-🙏感谢贡献-❤️"><a href="#❤️以下文章或项目排名不分先后-🙏感谢贡献-❤️" class="headerlink" title="❤️以下文章或项目排名不分先后 🙏感谢贡献 ❤️"></a>❤️以下文章或项目排名不分先后 🙏感谢贡献 ❤️</h4><h3 id="相关文章"><a href="#相关文章" class="headerlink" title="相关文章"></a>相关文章</h3><ul><li><strong>😄 <a href="http://47.111.230.167/index.php/archives/128/" target="_blank" rel="noopener">精简机器人插件</a></strong></li><li><strong>😄 <a href="https://segmentfault.com/a/1190000021259760" target="_blank" rel="noopener">实现一个“人工智能”QQ机器人！</a></strong></li><li><strong>😄 <a href="https://segmentfault.com/a/1190000021350469" target="_blank" rel="noopener">实现一个“人工智能”QQ机器人！续</a></strong></li><li><strong>😄 <a href="https://mcenjoy.cn/152/" target="_blank" rel="noopener">使用Python制作IOTQQ插件</a></strong></li><li><strong>😄 <a href="https://www.showdoc.cc/IOTQQ" target="_blank" rel="noopener">IOTBOT WebApi接口文档</a></strong></li><li><strong>😄 <a href="https://mcenjoy.cn/174/" target="_blank" rel="noopener">使用Go制作IOTQQ插件</a></strong></li></ul><h3 id="相关项目"><a href="#相关项目" class="headerlink" title="相关项目"></a>相关项目</h3><ul><li><strong>😄 <a href="https://github.com/KongChengPro/Pyiot" target="_blank" rel="noopener">一个基于IOTQQ的Python框架</a></strong></li><li><strong>😄 <a href="https://github.com/CodFrm/iotqq-plugins" target="_blank" rel="noopener">Lua/Go插件</a></strong></li><li><strong>😄 <a href="https://github.com/XJLZ/LuaPlugins" target="_blank" rel="noopener">LuaPlugins玩具</a></strong></li><li><strong>😄 <a href="https://github.com/MengXin001/IOTQQ_Plugins" target="_blank" rel="noopener">IOTQQ_Plugins</a></strong></li><li><strong>😄 <a href="https://github.com/xiyaowong/python-iotbot" target="_blank" rel="noopener">python-iotbot</a></strong></li><li><strong>😄 <a href="https://github.com/yuban10703/IOTQQ-color_pic/" target="_blank" rel="noopener">color_pic插件</a></strong></li><li><strong>😄 <a href="https://github.com/ViosinDeng/HamsterBot-IOTQQ" target="_blank" rel="noopener">仓鼠的QQ Bot框架-Java版本</a></strong></li><li><strong>😄 <a href="https://github.com/mcoo/iotqq-plugins-demo" target="_blank" rel="noopener">机器人插件模板Python</a></strong></li><li><strong>😄 <a href="https://github.com/rockswang/qqcensorbot" target="_blank" rel="noopener">QQ群反垃圾机器人</a></strong></li><li><strong>😄 <a href="https://github.com/CB-ym/IOTQQ_web" target="_blank" rel="noopener">IOTBOT机器人框架开发的web版机器人框架</a></strong></li><li><strong>😄 <a href="https://github.com/golezi/pyiotqq" target="_blank" rel="noopener">IOTQQ的Python SDK</a></strong></li><li><strong>😄 <a href="https://github.com/fenglindubu/IOTQQ_Socket" target="_blank" rel="noopener">C# 插件 By:枫林</a></strong></li></ul><h3 id="感谢"><a href="#感谢" class="headerlink" title="感谢"></a>感谢</h3><ul><li><p><strong>gopher-lua <a href="https://github.com/yuin/gopher-lua" target="_blank" rel="noopener">https://github.com/yuin/gopher-lua</a></strong></p></li><li><p><strong>gluahttp <a href="https://github.com/cjoudrey/gluahttp" target="_blank" rel="noopener">https://github.com/cjoudrey/gluahttp</a></strong></p></li><li><p><strong>TarsGo <a href="https://github.com/TarsCloud/TarsGo" target="_blank" rel="noopener">https://github.com/TarsCloud/TarsGo</a></strong></p></li><li><p><strong>BeegoLog <a href="https://github.com/beego" target="_blank" rel="noopener">https://github.com/beego</a></strong></p></li><li><p><strong>AdminLTE <a href="https://github.com/ColorlibHQ/AdminLTE" target="_blank" rel="noopener">AdminLTE</a></strong></p><h3 id="机器人测试交流裙"><a href="#机器人测试交流裙" class="headerlink" title="机器人测试交流裙"></a>机器人测试交流裙</h3></li><li><p><img src="https://camo.githubusercontent.com/77638ebe9b1c621da9395afc5af7bcb454459d3f/68747470733a2f2f6674702e626d702e6f76682f696d67732f323032302f30342f393233623939383431336136643334342e6a7067" class="lazyload" data-srcset="https://camo.githubusercontent.com/77638ebe9b1c621da9395afc5af7bcb454459d3f/68747470733a2f2f6674702e626d702e6f76682f696d67732f323032302f30342f393233623939383431336136643334342e6a7067" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> OPQBot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OPQBot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>气象记录</title>
      <link href="/meteorological-logs.html/"/>
      <url>/meteorological-logs.html/</url>
      
        <content type="html"><![CDATA[<ul><li>2021/02/10 受到强南支槽影响，深圳出现了大面积的中到大雨，局部暴雨天气，为近年来少见。</li><li>2021/02/26 受到地面辐合影响，深圳出现了局部大雨，大康等地积水明显。</li><li>2021/03/06 受到锋面雨带南压，深圳出现局地大雨。</li><li>2021/04/05 衡阳冷空气抵达与高空槽东移，出现小幅度的降温短暂阴雨天气。</li><li>2021/04/27-28 受到偏东暖湿气流和锋面切变影响，深圳西部地区连续两天出现大雨。</li><li>2021/05/02 受到反气旋前部暖湿气流和北部湾低压槽影响，深圳出现了首个日暴雨站点福城<code>72.1mm</code>。</li><li>2021/05/04 华南强对流飑线南压，多地出现强降雨。深圳迎来2021年第一场强对流。</li><li>2021/05/14 武汉蔡甸 &amp; 江苏盛泽龙卷(Radar)。</li><li>2021/05/24-26 受到锋面切变南压，南海季风扰动外围湿热气流和地面弱辐合线影响，深圳连续三天出现暴雨级别以上的天气，雨时伴有明显的雷暴活动。</li><li>2021/05/30-31 30日下午香港探空<code>CAPE</code>达到<code>5493J/kg</code>，晚间前海上空云闪频繁。31日飑线南压最大日雨量<code>71.9mm</code>。</li><li>2021/06/01 受西南气流雨带北抬，妈湾站日雨量<code>68.1mm</code>。</li><li>2021/06/05 热带风暴<code>CHOI-WAN彩云</code>位于台湾省南侧海域，冷锋过境南山站7时气温<code>24.2℃</code>。</li><li>2021/06/08-09 受到东南气流和西南气流辐合，深圳8号出现大雨9日出现暴雨。</li><li>2021/06/16 受低空西南气流，傍晚前海地区出现小面积辐辏状高积云。</li><li>2021/06/21-29 受到梅雨锋摆动激发的强对流和边界层西南急流触发的暖区，22日录得最大日雨量<code>134.1mm</code>。</li><li>2021/07/14 山东海域雷暴云团下沉产生滚轴云(FY-3D)。</li><li>2021/10/03 广州午后热对流，曙暮光条&amp;积雨云单体。</li><li>2021/10/09 热带风暴<code>LIONROCK狮子山</code>影响，深圳市0800Z-0900Z时最大日雨量<code>G3541</code>坝光站<code>330.3mm</code>。</li><li>2021/10/12 台风<code>KOMPASU圆规规</code>影响，12号全市陆地最大阵风<code>G3674</code>西涌基地站录得<code>34.2m/s</code>。</li><li>2021/10/16 冷空气前锋抵达深圳。</li><li>2021/10/21-22 深圳国家基本站整点最低气温<code>2021-10-22 08:00</code> <code>16.0℃</code>。</li></ul>]]></content>
      
      
      <categories>
          
          <category> Meteorology </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Blog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>读取米家蓝牙温湿度计数据</title>
      <link href="/read-xiaomi-thermometer.html/"/>
      <url>/read-xiaomi-thermometer.html/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>由于米家APP云端只能存储半年的传感器数据，所以给出一个可以进行本地归档的方案</p><ul><li>通过BLE连接温湿度计不需要进行米家APP上的配对</li><li>获取数据的设备需要支持蓝牙4.0或以上协议</li><li>推荐使用树莓派等各类开发板进行处理归档</li></ul><h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><p>这里使用iOS端上的<code>LightBlue</code>软件进行数据获取<br>在<code>Peripherals</code>页面搜索找到编号为<code>LYWSD03MMC</code>的设备连接。<br>连接传感器成功后找到<code>Temperature and Humidity</code>项(<code>UUID: EBE0CCC1-7A0A-4B0C-8A1A-6FF2997DA3A6</code>)</p><div class="img-wrap"><div class="frame-wrap" id="iphone11"><img class="img lazyload" src="https://gitee.com//MengXin546/CDN/raw/master/img/DG0W~SMQYT2@G_{}~PEFB7G.jpg" class="lazyload" data-srcset="https://gitee.com//MengXin546/CDN/raw/master/img/DG0W~SMQYT2@G_{}~PEFB7G.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/><div class="frame"></div></div></div><p>点击<code>Listen for notifications</code>监听传感器广播的温湿度数据。数据示例</p><pre><code>0x240946170B0x250946170B0x250946170B0x240946170B0x1F0946640B0x000000 ---空数据</code></pre><h2 id="解码"><a href="#解码" class="headerlink" title="解码"></a>解码</h2><p>以Hex数据<code>1F0946640B</code>为例<br>将十六进制数据两两分组得五组数据将其编号</p><pre><code>1F0946640B</code></pre><h4 id="温度数据"><a href="#温度数据" class="headerlink" title="温度数据"></a>温度数据</h4><p>传感器精度为小数点后两位小数，官方取小数点后一位数据，这里可以自行选择精度。<br>    1.取分组后的数据前两组<code>1F</code> <code>09</code>。<br>    2.将数据反序排列为<code>09</code> <code>1F</code>。（十六进制第一位不能为0，转换时舍去0实际输入<code>91F</code>）<br>    3.转为十进制得到数字<code>2335</code>。<br>    4.十进制数字÷100得<code>23.35</code>，此数据即为当前得温度数据</p><h4 id="湿度数据"><a href="#湿度数据" class="headerlink" title="湿度数据"></a>湿度数据</h4><p>1.取分组后的第三组数据<code>46</code><br>2.转换为十进制数据得<code>70</code>，即为当前湿度数据。<br>后面两组数据暂时没有摸索出来用途，0B组似乎是固定数值没有变动。</p><h2 id="On-Raspberry"><a href="#On-Raspberry" class="headerlink" title="On Raspberry"></a>On Raspberry</h2><p>推荐使用Gatttool与Bluez组合，<a href="https://blog.csdn.net/qq_33433070/article/details/78668105" target="_blank" rel="noopener">参考文章</a>。<br>当然上述只是对数据的解码提出的思路，进行本地归档还需要带家用Python或者其他语言进行处理</p>]]></content>
      
      
      <categories>
          
          <category> Bluetooth </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Bluetooth </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于近日</title>
      <link href="/todo.html/"/>
      <url>/todo.html/</url>
      
        <content type="html"><![CDATA[<h2 id="2021-8-13"><a href="#2021-8-13" class="headerlink" title="2021-8-13"></a>2021-8-13</h2><h3 id="balabala"><a href="#balabala" class="headerlink" title="balabala"></a>balabala</h3><ul><li>继上回，半年摸鱼之中学考顺利结束。</li><li>即将进入一个转折阶段，将来是不是要走强基计划?还没有做出最后的决定。一个暑期的学习自身感觉就过于浮躁，处于无止境的拖延和划水，尤其是一些在很难的知识点没有花时间啃下来，希望开学后少摸手机能重新静下来学明白吧。</li></ul><h2 id="2021-1-30"><a href="#2021-1-30" class="headerlink" title="2021-1-30"></a>2021-1-30</h2><h3 id="balabala-1"><a href="#balabala-1" class="headerlink" title="balabala"></a>balabala</h3><ul><li>从去年年底开始在完善2020年的气象年度回顾记录，小窝一直闲置的没有去维护。</li><li>摸鱼时间愈发的少，可能又会闲置许久。</li><li>新学期选完科准备考试ing。</li></ul>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Blog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在NanoPi上安装Scrapy框架</title>
      <link href="/install-scrapy.html/"/>
      <url>/install-scrapy.html/</url>
      
        <content type="html"><![CDATA[<p>以下操作在Armbian系统下进行，系统已经预装完成Python3.8。<br>1.安装<code>pip</code></p><pre><code>sudo apt-get install python3-pip</code></pre><p>完成后输入<code>pip3 -V</code>检查是否安装成功，如果显示出当前<code>pip</code>版本则安装成功<br>2.安装Dev套件</p><pre><code>sudo apt-get install python3-dev</code></pre><p>没有开发依赖项在<code>Twisted</code>安装中会提示如下报错。被该报错困扰许久……<img src="/images/cry.gif" class="lazyload" data-srcset="/images/cry.gif" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""> <img src="/images/cry.gif" class="lazyload" data-srcset="/images/cry.gif" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""></p><pre><code class="BASH">build/temp.linux-x86_64-2.7/twisted/test/raiser.o twisted/test/raiser.c:4:20: fatal error: Python.h: No such file or directory #include “Python.h” ^ compilation terminated. error: command ‘x86_64-linux-gnu-gcc’ failed with exit status 1</code></pre><p>3.安装Scarpy</p><pre><code>pip3 install Scarpy</code></pre>]]></content>
      
      
      <categories>
          
          <category> NanoPi </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NanoPi K2 </tag>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>给NanoPiK2更换国内软件源</title>
      <link href="/change-npik2-source.html/"/>
      <url>/change-npik2-source.html/</url>
      
        <content type="html"><![CDATA[<p>1.使用SSH或者在图形桌面下使用终端连接到你的NanoPiK2上<br>2.备份官方软件源</p><pre><code>sudo cp /etc/apt/sources.list /etc/apt/sources.backup.list</code></pre><p>3.更换软件源<br>这里使用<a href="https://mirrors.huaweicloud.com/" target="_blank" rel="noopener">华为开源镜像站</a>的镜像</p><pre><code>sudo nano /etc/apt/sources.list</code></pre><p>可以单独将<code>http://ports.ubuntu.com/</code>替换为<code>https://mirrors.huaweicloud.com/ubuntu-ports/</code><br>也可以把全部内容用下面的内容替换</p><pre><code>deb https://mirrors.huaweicloud.com/ubuntu-ports/ focal main restricted universe multiverse#deb-src http://ports.ubuntu.com/ focal main restricted universe multiversedeb https://mirrors.huaweicloud.com/ubuntu-ports/ focal-security main restricted universe multiverse#deb-src http://ports.ubuntu.com/ focal-security main restricted universe multiversedeb https://mirrors.huaweicloud.com/ubuntu-ports/ focal-updates main restricted universe multiverse#deb-src http://ports.ubuntu.com/ focal-updates main restricted universe multiversedeb https://mirrors.huaweicloud.com/ubuntu-ports/ focal-backports main restricted universe multiverse#deb-src http://ports.ubuntu.com/ focal-backports main restricted universe multiverse</code></pre><p>4.完成后使用<code>Ctrl+X</code>退出并输入<code>Y</code>+回车保存文件<br>5.更新软件源</p><pre><code>sudo apt-get update</code></pre><hr><p>附一份官方源地址备份<img src="/images/pp-9.png" class="lazyload" data-srcset="/images/pp-9.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""></p><pre><code class="sources.backup.list">deb http://ports.ubuntu.com/ focal main restricted universe multiverse#deb-src http://ports.ubuntu.com/ focal main restricted universe multiversedeb http://ports.ubuntu.com/ focal-security main restricted universe multiverse#deb-src http://ports.ubuntu.com/ focal-security main restricted universe multiversedeb http://ports.ubuntu.com/ focal-updates main restricted universe multiverse#deb-src http://ports.ubuntu.com/ focal-updates main restricted universe multiversedeb http://ports.ubuntu.com/ focal-backports main restricted universe multiverse#deb-src http://ports.ubuntu.com/ focal-backports main restricted universe multiverse</code></pre>]]></content>
      
      
      <categories>
          
          <category> NanoPi </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Armbian </tag>
            
            <tag> NanoPi K2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于Hexo部署报错</title>
      <link href="/fix-hexo-error.html/"/>
      <url>/fix-hexo-error.html/</url>
      
        <content type="html"><![CDATA[<h2 id="Hexo部署报错笔记"><a href="#Hexo部署报错笔记" class="headerlink" title="Hexo部署报错笔记"></a>Hexo部署报错笔记</h2><a id="more"></a><pre><code class="BASH">fatal: Unable to create &#39;C:/Users/Administrator/Desktop/Hexo-theme-sakura-master/.deploy_git/.git/index.lock&#39;: File exists.Another git process seems to be running in this repository, e.g.an editor opened by &#39;git commit&#39;. Please make sure all processesare terminated then try again. If it still fails, a git processmay have crashed in this repository earlier:remove the file manually to continue.FATAL Something&#39;s wrong. Maybe you can find the solution here: https://hexo.io/docs/troubleshooting.html</code></pre><p>由于上一次部署意外关闭造成该报错，显示隐藏文件夹并删除<code>.deploy_git/.git/index.lock</code>文件即可<br><img src="https://i.loli.net/2020/03/21/ktwgru57FDSf6Oo.png" class="lazyload" data-srcset="https://i.loli.net/2020/03/21/ktwgru57FDSf6Oo.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Note </tag>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在树莓派上安装AdGuardHome</title>
      <link href="/install-guard.html/"/>
      <url>/install-guard.html/</url>
      
        <content type="html"><![CDATA[<h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p>连接你的树莓派，从Github获取发布的AdGuardHome</p><a id="more"></a><center><iframe frameborder="0" scrolling="0" allowtransparency="true" src="https://api.2heng.xin/github-card/?repo=AdguardTeam/AdGuardHome" width="400" height="153" style="margin-left: 50%; transform: translateX(-50%);"></iframe></center><pre><code class="BASH">wget https://github.com/AdguardTeam/AdGuardHome/releases/download/v0.101.0/AdGuardHome_linux_arm.tar.gz</code></pre><pre><code class="BASH"># 解压tar -xvzf AdGuardHome_linux_arm.tar.gzcd AdGuardHome# screen后台运行screen -S Adsudo ./AdGuardHome</code></pre><h2 id="AdGuardHome配置"><a href="#AdGuardHome配置" class="headerlink" title="AdGuardHome配置"></a>AdGuardHome配置</h2><p>访问<code>树莓派内网IP:3000</code>进入后台<br>设置账户密码，建议在路由器中分配静态内网IP给树莓派。<br><img src="https://i.loli.net/2020/03/20/mdPE4kcgeuhax3o.jpg" class="lazyload" data-srcset="https://i.loli.net/2020/03/20/mdPE4kcgeuhax3o.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="Set"><br>完成设置后Login进入控制台<br><img src="https://i.loli.net/2020/03/20/PiFQIGW2mnbVD63.png" class="lazyload" data-srcset="https://i.loli.net/2020/03/20/PiFQIGW2mnbVD63.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="Main"></p><h2 id="DNS配置"><a href="#DNS配置" class="headerlink" title="DNS配置"></a>DNS配置</h2><p>在过滤器中勾选自带的过滤器并应用。<br>还可以添加Adgk的广告过滤规则。添加以下链接并应用更新规则。建议修改规则自动更新时间为24Hours</p><pre><code>https://gitee.com/banbendalao/adguard/raw/master/ADgk.txt</code></pre><p>在DNS设置中设置上游DNS，不推荐使用默认的CloudFlareDNS，可以使用以下国内的公共DNS</p><pre><code>Ali DNS: 223.5.5.5;223.6.6.6Baidu DNS: 180.76.76.76Tencent DNS: 119.29.29.29oneDNS: 117.50.11.11CNNIC sDNS: 1.2.4.8114DNS: 114.114.114.114(推荐设置为备用DNS)</code></pre><p>点击测试DNS服务器可用后，应用设置。</p><h2 id="设备接入"><a href="#设备接入" class="headerlink" title="设备接入"></a>设备接入</h2><p>将需要接入的设备WIFIDNS设置为树莓派的内网IP即可，在AdGuardHome后台有详细的设置教程。</p><h2 id="拦截追踪"><a href="#拦截追踪" class="headerlink" title="拦截追踪"></a>拦截追踪</h2><p>接入设备后，访问一些网站就可以在AdGuardHome后台看到拦截的情况了。这是使用一晚上拦截追踪的情况。<br><img src="https://i.loli.net/2020/03/20/DZEFyMPQmw9pO2C.png" class="lazyload" data-srcset="https://i.loli.net/2020/03/20/DZEFyMPQmw9pO2C.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""></p><table><thead><tr><th>追踪器地址</th><th>拦截次数</th></tr></thead><tbody><tr><td>pingma.qq.com</td><td>121</td></tr><tr><td>pos.baidu.com</td><td>97</td></tr><tr><td>mqqeve.beacon.qq.com</td><td>95</td></tr><tr><td>ieventlog.beacon.qq.com</td><td>81</td></tr><tr><td>hm.baidu.com</td><td>63</td></tr><tr><td>mqqstr.beacon.qq.com</td><td>51</td></tr><tr><td>vortex.data.microsoft.com</td><td>51</td></tr><tr><td>mttstr.beacon.qq.com</td><td>48</td></tr><tr><td>sp0.baidu.com</td><td>44</td></tr><tr><td>wspeed.qq.com</td><td>41</td></tr><tr><td>adashbc.ut.taobao.com</td><td>41</td></tr><tr><td>dup.baidustatic.com</td><td>39</td></tr><tr><td>show-g.mediav.com</td><td>38</td></tr><tr><td>sp1.baidu.com</td><td>38</td></tr><tr><td>d.ifengimg.com</td><td>37</td></tr><tr><td>pingjs.qq.com</td><td>36</td></tr><tr><td>e.crashlytics.com</td><td>35</td></tr><tr><td>mobilelog.upqzfile.com</td><td>35</td></tr><tr><td>www.google-analytics.com</td><td>34</td></tr><tr><td>mtteve.beacon.qq.com</td><td>33</td></tr><tr><td>ulogs.umeng.com</td><td>33</td></tr><tr><td>ulogs.umengcloud.com</td><td>31</td></tr><tr><td>ios.bugly.qq.com</td><td>30</td></tr><tr><td>app-measurement.com</td><td>30</td></tr><tr><td>eclick.baidu.com</td><td>29</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> Raspberry </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 树莓派 </tag>
            
            <tag> AdGuard </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>为你的Valine添加评论邮箱提醒</title>
      <link href="/use-valine-mail.html/"/>
      <url>/use-valine-mail.html/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>作者在1.4.0+的版本中去除了邮件通知。过一段时间再看看commit修改下。<br>你现在可以使用1.3.10继续实现Valine的邮件通知或Valine-admin<a id="more"></a></p><h2 id="主题配置"><a href="#主题配置" class="headerlink" title="主题配置"></a>主题配置</h2><p>进入theme目录中你所使用的主题文件夹，这里以<code>hexo-Sakura</code>主题为例，编辑<code>layout/_partial/comments.ejs</code>。<br>在原有的<code>&lt;script&gt;</code>中添加以下代码</p><pre><code class="JavaScript">var notify = &#39;true&#39; ? true : false;var verify = &#39;false&#39; ? true : false;var GUEST_INFO = [&#39;nick&#39;,&#39;mail&#39;,&#39;link&#39;];var guest_info = &#39;nick,mail,link&#39;.split(&#39;,&#39;).filter(function(item){  return GUEST_INFO.indexOf(item) &gt; -1});</code></pre><p>在<code>valine.init</code>中添加</p><pre><code class="JavaScript">notify:notify</code></pre><p><img src="https://s1.ax1x.com/2020/03/15/83M3y4.png" class="lazyload" data-srcset="https://s1.ax1x.com/2020/03/15/83M3y4.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="添加"></p><h2 id="后台配置"><a href="#后台配置" class="headerlink" title="后台配置"></a>后台配置</h2><p>访问<a href="https://Leancloud.cn" target="_blank" rel="noopener">LeanCloud控制台</a><br>进入应用-设置-邮件模板<br>编辑<code>用于重置密码的邮件主题</code><br>这里提供一个内容模板，可以自行修改内容</p><pre><code class="HTML">&lt;p&gt;Hi, {{username}}&lt;/p&gt;&lt;p&gt;你在气象观测/萌新的BLOG的评论收到了新的回复，请点击查看：&lt;/p&gt;&lt;center&gt;&lt;a href=&quot;https://moex.club&quot; style=&quot;display: inline-block; padding: 10px 20px; border-radius: 4px; background-color: #3090e4; color: #fff; text-decoration: none;&quot;&gt;马上查看!&lt;/a&gt;&lt;/center&gt;</code></pre><p>收到回复的效果如下<br><img src="https://i.loli.net/2020/03/15/HXsR8t4gMEf9dPe.jpg" class="lazyload" data-srcset="https://i.loli.net/2020/03/15/HXsR8t4gMEf9dPe.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""><br>注：开启邮件回复提醒会valine自动开启评论验证码验证。</p><h3 id="Ad"><a href="#Ad" class="headerlink" title="Ad"></a>Ad</h3><p>气象观测站点上线啦！还不赶紧去看看<br><a href="https://moex.club" target="_blank" rel="noopener">点我直达</a></p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Valine </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>搭建蜜罐中央服务器MHN</title>
      <link href="/build-mhn-server.html/"/>
      <url>/build-mhn-server.html/</url>
      
        <content type="html"><![CDATA[<h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><p>一台1核2G或以上的服务器<br>服务器系统为Ubuntu 14.04/16.04/12.02或Centos 6.9 。<a id="more"></a>以下操作我是在Ubuntu16.04 LTS服务器版本下进行的<br>如果为国内服务器请务必连接代理或更换软件源为腾讯云镜像源&amp;以下地址</p><pre><code>deb http://us-east-2.ec2.archive.ubuntu.com/ubuntu/ xenial main restricteddeb http://us-east-2.ec2.archive.ubuntu.com/ubuntu/ xenial-updates main restricteddeb http://us-east-2.ec2.archive.ubuntu.com/ubuntu/ xenial universedeb http://us-east-2.ec2.archive.ubuntu.com/ubuntu/ xenial main restricteddeb http://us-east-2.ec2.archive.ubuntu.com/ubuntu/ xenial-updates main restricteddeb http://us-east-2.ec2.archive.ubuntu.com/ubuntu/ xenial universedeb http://us-east-2.ec2.archive.ubuntu.com/ubuntu/ xenial-updates universedeb http://us-east-2.ec2.archive.ubuntu.com/ubuntu/ xenial multiversedeb http://us-east-2.ec2.archive.ubuntu.com/ubuntu/ xenial-updates multiverse</code></pre><h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><pre><code class="BASH">cd /opt/sudo git clone https://github.com/threatstream/mhn.gitcd mhn/sudo ./install.sh</code></pre><p>若Github clone速度较慢可使用国内镜像仓库<code>https://git.code.tencent.com/MengXin/mhn.git</code><br>过程中请保证网络畅通，确保你当前网络环境可以访问上述源和Github，避免进行二次安装下载包错误。如果安装顺利3分钟左右就可以进入配置<br><img src="https://document-1254197101.cos.ap-guangzhou.myqcloud.com/hexo/pic/2-1024x594.png" class="lazyload" data-srcset="https://document-1254197101.cos.ap-guangzhou.myqcloud.com/hexo/pic/2-1024x594.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""></p><h3 id="配置后台"><a href="#配置后台" class="headerlink" title="配置后台"></a>配置后台</h3><p>1.不运行debug<br>2.输要设置的后台管理的账号邮箱可以不填自己真实的<br>3.设置你的后台密码<br>4.重复密码<br>5.后台管理系统的地址，如果你的服务器开了80端口可以直接空格下一项<br>6.攻击地图的地址，请开启服务器的3000端口或者自行设置其他端口<br>7.邮件设置空格跳过<br>8.TLS和SSL都选n<br>9.不安装Splunk和ELK<br>安装完成后（设置完规则后）执行<code>supervisorctl status</code> 检查服务状态<br>不出意外的话mhn-celery-worker是启动失败的，执行<code>chmod 777 -R /var/log/mhn/mhn.log</code>后重新启动一遍服务<code>supervisorctl restart all</code>正确的情况是全部服务都在 RUNNING状态，此时访问服务器ip就可以进入后台管理页面。</p><h2 id="关于报错"><a href="#关于报错" class="headerlink" title="关于报错"></a>关于报错</h2><p>启动失败的服务除honeymap服务外都可以尝试用<code>supervisorctl start 服务名字</code><br>honeymap服务启动失败多半是因为网络原因，更换一个更好的梯子代理后重新尝试安装install.sh。<a href="https://blog.csdn.net/wutianxu123/article/details/84886811" target="_blank" rel="noopener">这里</a>给出了一个手动修复的教程，但我在尝试安装go的时候还是会被墙或者报错。</p><h2 id="原版配置"><a href="#原版配置" class="headerlink" title="原版配置"></a>原版配置</h2><h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><ul><li>The MHN server is supported on Ubuntu 18.04, Ubuntu 16.04, and Centos 6.9.  </li><li>Other versions of Linux may work but are generally not tested or supported.</li></ul><p>Note: if you run into trouble during the install, please checkout the <a href="https://github.com/Pwnlandia/MHN/wiki/MHN-Troubleshooting-Guide" target="_blank" rel="noopener">troubleshooting guide</a> on the wiki.  If you only want to experiment with MHN on some virtual machines, please check out the <a href="https://github.com/Pwnlandia/mhn/wiki/Getting-up-and-running-using-Vagrant" target="_blank" rel="noopener">Getting up and Running with Vagrant</a> guide on the wiki.</p><p>Install Git</p><pre><code># on Debian or Ubuntu$ sudo apt install git -y</code></pre><p>Install MHN</p><pre><code>$ cd /opt/$ sudo git clone https://github.com/pwnlandia/mhn.git$ cd mhn/</code></pre><p>Run the following script to complete the installation.  While this script runs,<br>you will be prompted for some configuration options.  See below for how this<br>looks.</p><pre><code>$ sudo ./install.sh</code></pre><h3 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h3><pre><code>===========================================================MHN Configuration===========================================================Do you wish to run in Debug mode?: y/n nSuperuser email: YOUR_EMAIL@YOURSITE.COMSuperuser password: Server base url [&quot;http://1.2.3.4&quot;]: Honeymap url [&quot;http://1.2.3.4:3000&quot;]:Mail server address [&quot;localhost&quot;]: Mail server port [25]: Use TLS for email?: y/n nUse SSL for email?: y/n nMail server username [&quot;&quot;]: Mail server password [&quot;&quot;]: Mail default sender [&quot;&quot;]: Path for log file [&quot;mhn.log&quot;]: </code></pre><h3 id="Running"><a href="#Running" class="headerlink" title="Running"></a>Running</h3><p>If the installation scripts ran successfully, you should have a number of<br>services running on your MHN server.  See below for checking these.</p><pre><code>user@precise64:/opt/mhn/scripts$ sudo /etc/init.d/nginx status * nginx is runninguser@precise64:/opt/mhn/scripts$ sudo /etc/init.d/supervisor status is runninguser@precise64:/opt/mhn/scripts$ sudo supervisorctl statusgeoloc                           RUNNING    pid 31443, uptime 0:00:12honeymap                         RUNNING    pid 30826, uptime 0:08:54hpfeeds-broker                   RUNNING    pid 10089, uptime 0:36:42mhn-celery-beat                  RUNNING    pid 29909, uptime 0:18:41mhn-celery-worker                RUNNING    pid 29910, uptime 0:18:41mhn-collector                    RUNNING    pid 7872,  uptime 0:18:41mhn-uwsgi                        RUNNING    pid 29911, uptime 0:18:41mnemosyne                        RUNNING    pid 28173, uptime 0:30:08</code></pre><h3 id="Running-MHN-Behind-a-Proxy"><a href="#Running-MHN-Behind-a-Proxy" class="headerlink" title="Running MHN Behind a Proxy"></a>Running MHN Behind a Proxy</h3><p>For directions on running MHN behind a web proxy, follow the directions in the<br><a href="https://github.com/pwnlandia/mhn/wiki/Running-MHN-Behind-a-Web-Proxy" target="_blank" rel="noopener">wiki.</a></p><h3 id="Running-MHN-Over-HTTPS"><a href="#Running-MHN-Over-HTTPS" class="headerlink" title="Running MHN Over HTTPS"></a>Running MHN Over HTTPS</h3><p>By default MHN will run without HTTPS, to configure your installation to use SSL<br>certificates directions can be found in the <a href="https://github.com/pwnlandia/mhn/wiki/Running-MHN-Over-HTTPS" target="_blank" rel="noopener">wiki.</a></p><h3 id="Running-MHN-with-Docker"><a href="#Running-MHN-with-Docker" class="headerlink" title="Running MHN with Docker"></a>Running MHN with Docker</h3><p>Running MHN in docker is not officially supported, but it works.<br>The container takes a few minutes to start at the first launch to initialize.<br>Splunk, ArcSight and ELK are not yet supported in Docker.</p><h4 id="Build-it"><a href="#Build-it" class="headerlink" title="Build it"></a>Build it</h4><pre><code>$ docker build -t mhn .</code></pre><h4 id="Run-it"><a href="#Run-it" class="headerlink" title="Run it"></a>Run it</h4><pre><code>$ docker run -d -p 10000:10000 -p 80:80 -p 3000:3000 -p 8089:8089 \$ --restart unless-stopped \$ --name mhn \$ -e SUPERUSER_EMAIL=root@localhost \$ -e SUPERUSER_PASSWORD=password \$ -e SERVER_BASE_URL=&quot;http://mhn&quot; \$ -e HONEYMAP_URL=&quot;http://mhn:3000&quot; \$ mhn</code></pre><h4 id="Environment-variables"><a href="#Environment-variables" class="headerlink" title="Environment variables"></a>Environment variables</h4><pre><code>SUPERUSER_EMAILSUPERUSER_PASSWORDSERVER_BASE_URLHONEYMAP_URLDEBUG_MODESMTP_HOSTSMTP_PORTSMTP_TLSSMTP_SSLSMTP_USERNAMESMTP_PASSWORDSMTP_SENDERMHN_LOG</code></pre><h2 id="Deploying-honeypots-with-MHN"><a href="#Deploying-honeypots-with-MHN" class="headerlink" title="Deploying honeypots with MHN"></a>Deploying honeypots with MHN</h2><p>MHN was designed to make scalable deployment of honeypots easier.  Here are the<br>steps for deploying a honeypot with MHN:</p><ol><li>Login to your MHN server web app.</li><li>Click the “Deploy” link in the upper left hand corner.</li><li>Select a type of honeypot from the drop down menu (e.g. “Ubuntu Dionaea”).</li><li>Copy the deployment command.</li><li>Login to a honeypot server and run this command as root.</li></ol><p>If the deploy script successfully completes you should see the new sensor listed<br>under your deployed sensor list. For a full list of supported sensors, check the list here: <a href="https://github.com/pwnlandia/mhn/wiki/List-of-Supported-Sensors" target="_blank" rel="noopener">List of Supported Sensors</a></p><h2 id="Integration-with-Splunk-and-ArcSight"><a href="#Integration-with-Splunk-and-ArcSight" class="headerlink" title="Integration with Splunk and ArcSight"></a>Integration with Splunk and ArcSight</h2><p>hpfeeds-logger can be used to integrate MHN with Splunk and ArcSight.</p><h4 id="Splunk"><a href="#Splunk" class="headerlink" title="Splunk"></a>Splunk</h4><pre><code>cd /opt/mhn/scripts/sudo ./install_hpfeeds-logger-splunk.sh</code></pre><p>This will log the events as key/value pairs to /var/log/mhn-splunk.log.  This<br>log should be monitored by the SplunkUniversalForwarder.</p><h4 id="Arcsight"><a href="#Arcsight" class="headerlink" title="Arcsight"></a>Arcsight</h4><pre><code>cd /opt/mhn/scripts/sudo ./install_hpfeeds-logger-arcsight.sh</code></pre><p>This will log the events as CEF to /var/log/mhn-arcsight.log</p>]]></content>
      
      
      <categories>
          
          <category> Security </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MHN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Intel Xeon Gold 6278C参数</title>
      <link href="/6278c-readme.html/"/>
      <url>/6278c-readme.html/</url>
      
        <content type="html"><![CDATA[<p>在华为云S6云服务器上发现的，该型号牙膏厂官网没有相关信息，属于服务商定制CPU</p><a id="more"></a><pre><code> Name    Intel Xeon Gold Codename    Cascade Lake Specification    Intel(R) Xeon(R) Gold 6278C CPU @ 2.60GHz Package (platform ID)    Socket 3647 LGA (0x0) CPUID    6.5.7 Extended CPUID    6.55 Core Stepping     Technology    14 nm Core Speed    2600.0 MHz Stock frequency    2600 MHz Instructions sets    MMX, SSE, SSE2, SSE3, SSSE3, SSE4.1, SSE4.2, EM64T, AES, AVX, AVX2, AVX512F, FMA3, TSX Microcode Revision    0x1 L1 Data cache    32 KBytes, 8-way set associative, 64-byte line size L1 Instruction cache    32 KBytes, 8-way set associative, 64-byte line size L2 cache    1024 KBytes, 16-way set associative, 64-byte line size L3 cache    36608 KBytes, 11-way set associative, 64-byte line size Max CPUID level    0000000Dh Max CPUID ext. level    80000008h Cache descriptor    Level 1, D, 32 KB, 2 thread(s) Cache descriptor    Level 1, I, 32 KB, 2 thread(s) Cache descriptor    Level 2, U, 1 MB, 2 thread(s) Cache descriptor    Level 3, U, 36608 KB, 2 thread(s)</code></pre><p><img src="https://document-1254197101.cos.ap-guangzhou.myqcloud.com/hexo/pic/6278C.png" class="lazyload" data-srcset="https://document-1254197101.cos.ap-guangzhou.myqcloud.com/hexo/pic/6278C.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""></p><p>核心数/线程数/最大睿频未知<br>CPUZ基准Version17.01.64单核跑分349分</p>]]></content>
      
      
      <categories>
          
          <category> Intel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Xeon </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>食用软件无线电RTL-SDR</title>
      <link href="/use-rtl.html/"/>
      <url>/use-rtl.html/</url>
      
        <content type="html"><![CDATA[<h3 id="关于RTLSDR"><a href="#关于RTLSDR" class="headerlink" title="关于RTLSDR"></a>关于RTLSDR</h3><p>RTL-SDR这是一个低廉的家用消费档次的 DVB-T USB 接口的接收机的创新发明，一个完全的软件定义无线电。[^1]</p><a id="more"></a><p>也就是俗称的电视棒,可以用较低的价格来玩转软件无线电<br>本文所用到的是RTL2832U+R820T2</p><h3 id="食材"><a href="#食材" class="headerlink" title="食材"></a>食材</h3><ul><li>一根电视棒RTL2832U+R820T2（某宝上40左右即可买到）</li><li>一根天线，可以使用电视棒送的小天线</li><li>一台落灰的树莓派或电脑（本文两个环境会分别介绍）<h3 id="开始食用"><a href="#开始食用" class="headerlink" title="开始食用"></a>开始食用</h3><h4 id="树莓派搭建信号接受平台"><a href="#树莓派搭建信号接受平台" class="headerlink" title="树莓派搭建信号接受平台"></a>树莓派搭建信号接受平台</h4>系统为官方的Raspbian2018-1103<br>操作前建议先更换软件源，安利阿里云源</li></ul><pre><code class="bash">sudo apt-get updatesudo apt-get install cmake build-essential python-pip libusb-1.0-0-dev python-numpy git  # 安装依赖git clone git://git.osmocom.org/rtl-sdr.git   #开始安装rtl-sdrcd rtl-sdr/mkdir buildcd buildcmake ../ -DINSTALL_UDEV_RULES=ONmakesudo make installsudo ldconfig</code></pre><p>至此rtlsdr接受工作已经完成，接下来你可以食用freqshow直接在树莓派上显示，也可以通过rtl-tcp用windows下的sdrsharp软件来收听（windows和树莓派需位于同一局域网或树莓派所在网络开启了端口转发）。<br>在这里给出freqshow食用方法[^2]，但更推荐使用第二个操作</p><pre><code class="bash">sudo pip install pyrtlsdrcd ~git clone https://github.com/adafruit/FreqShow.gitcd FreqShow</code></pre><p>修改freqshow.py文件如下</p><pre><code class="bash"># Initialize pygame and SDL to use the PiTFT display and chscreen.#os.putenv(&#39;SDL_VIDEODRIVER&#39;, &#39;fbcon&#39;)#os.putenv(&#39;SDL_FBDEV&#39;      , &#39;/dev/fb1&#39;)#os.putenv(&#39;SDL_MOUSEDRV&#39;   , &#39;TSLIB&#39;)#os.putenv(&#39;SDL_MOUSEDEV&#39;   , &#39;/dev/input/touchscreen&#39;)pygame.mouse.set_visible(True)</code></pre><pre><code class="bash">sudo python freqshow.py#在freqshow目录里执行这个命令来启动freqshow</code></pre><p>使用tcp转发操作起来就比较容易<br>执行<code>rtl_tcp -a 你的树莓派内网ip</code><br>然后在windows上使用SDRSharp选择RTL_TCP，填入ip即可端口默认1234。</p><p>取消勾选RTLAGC<br>增益可自行拉下面的滑动条，取最合适的就可以。<a href="https://jq.qq.com/?_wv=1027&k=55b9O0W" target="_blank" rel="noopener">软件可以进大佬群自取</a></p><h4 id="Windows平台接受"><a href="#Windows平台接受" class="headerlink" title="Windows平台接受"></a>Windows平台接受</h4><p>依然要用到上面的软件（大佬群可以拿！）<br>先运行zadig进入Options选List All Devices就可以看到所有插在电脑上的rtl设备。选择rtl2832u点Reinstall Driver安装驱动。<br>运行#SDR选择RTL-USB/AM模式调节频率即可收听</p><h3 id="在树莓派上Dump1090"><a href="#在树莓派上Dump1090" class="headerlink" title="在树莓派上Dump1090"></a>在树莓派上Dump1090</h3><p>建议在pi的根目录执行</p><pre><code>git clone git://github.com/MalcolmRobb/dump1090.gitcd dump1090make</code></pre><p>安装完成后执行<code>./dump1090 -–interactive –-net</code>后在终端和访问树莓派的内网地址<code>ip:8080</code>即可显示上空飞机的信息</p><p>[^1]：来自百度百科<a href="https://baike.baidu.com/item/RTL-SDR/1338576" target="_blank" rel="noopener">https://baike.baidu.com/item/RTL-SDR/1338576</a><br>[^2]：freqshow安装过程参考<a href="https://learn.adafruit.com/freq-show-raspberry-pi-rtl-sdr-scanner/installation" target="_blank" rel="noopener">https://learn.adafruit.com/freq-show-raspberry-pi-rtl-sdr-scanner/installation</a></p>]]></content>
      
      
      <categories>
          
          <category> SDR </category>
          
      </categories>
      
      
        <tags>
            
            <tag> RTL-SDR </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>体验腾讯云万象优图</title>
      <link href="/use-qcloud-detect.html/"/>
      <url>/use-qcloud-detect.html/</url>
      
        <content type="html"><![CDATA[<p><a href="https://cloud.tencent.com/developer/labs/lab/10071" target="_blank" rel="noopener">原文</a>，本文只作笔记说明下部分地方自己使用时发现的问题，少量步骤省略。</p><h2 id="初始化配置"><a href="#初始化配置" class="headerlink" title="初始化配置"></a>初始化配置</h2><p>使用万象优图图片鉴黄 API 接口</p><a id="more"></a><p>获取腾讯云账号 APP ID<br>配置云 API 公钥/密钥<br>配置优图 bucket<br>首先在终端执行以下命令，创建目录 /data/try-pi，然后进入到该目录：</p><pre><code class="BASH">mkdir -p /data/try-pi &amp;&amp; cd $_</code></pre><p>然后在目录 /data/try-pi 下创建 init.sh 文件</p><pre><code class="BASH">#!/bin/bash########################################## 基础配置########################################## 腾讯云账号 APP ID# 在如下单引号内填入你的 APPIDexport APP_ID=&#39;&#39;# 云 API 公钥# 在如单引号内填入你的 SecretIDexport SECRET_ID=&#39;&#39;# 云 API 密钥# 在如下单引号内填入你的 SecretKeyexport SECRET_KEY=&#39;&#39;# 优图 bucket 名称# 如果你创建的 bucket 名称不叫 trial，替换为自己创建的即可export BUCKET_NAME=&#39;trial&#39;</code></pre><p>在云Api控制台中创建响应的ID和KEY</p><h2 id="将配置项导出为环境变量"><a href="#将配置项导出为环境变量" class="headerlink" title="将配置项导出为环境变量"></a>将配置项导出为环境变量</h2><p>在终端中执行以下命令，将各配置项导出为 Shell 环境变量：</p><pre><code class="BASH">source init.sh</code></pre><h2 id="生成鉴权签名"><a href="#生成鉴权签名" class="headerlink" title="生成鉴权签名"></a>生成鉴权签名</h2><p>将创建脚本来生成有效期为 30 天的多次有效的签名。在目录 /data/try-pi 下创建 gen-sign.sh 文件，然后在文件中贴入以下脚本：</p><pre><code class="BASH">#!/bin/bash########################################## 生成多次有效的鉴权签名（有效期 30 天） # @see https://cloud.tencent.com/document/product/460/6968########################################## 当前时间戳（秒）current_time=$(date +%s)# 到期时间戳（秒）expire_time=$(($current_time + 30 * 24 * 60 * 60))# 随机串，无符号 10 进制整数（不大于 10 位）rand=&#39;4815162342&#39;# 历史遗留字段，写死为 0user_id=&#39;0&#39;# 拼接签名串str=&quot;a=$APP_ID&amp;b=$BUCKET_NAME&amp;k=$SECRET_ID&amp;e=$expire_time&amp;t=$current_time&amp;r=$rand&amp;u=$user_id&quot;;# 使用 HMAC-SHA1 算法对签名串加密sign=$(echo -n $str | openssl dgst -sha1 -hmac $SECRET_KEY -binary)# 对加密串进行 Base64 编码sign=$(echo -n $sign$str | base64)# 移除多余的空格得到最终的鉴权签名sign=$(echo -n $sign | tr -d &#39; &#39;)# 导出鉴权签名export AUTH_SIGN=$sign</code></pre><h3 id="将签名导出为环境变量"><a href="#将签名导出为环境变量" class="headerlink" title="将签名导出为环境变量"></a>将签名导出为环境变量</h3><p>你应该在执行<code>source init.sh</code>后再执行该命令！</p><pre><code class="BASH">source gen-sign.sh</code></pre><h2 id="准备鉴黄脚本"><a href="#准备鉴黄脚本" class="headerlink" title="准备鉴黄脚本"></a>准备鉴黄脚本</h2><p>仍旧在目录 /data/try-pi 下创建 detect-porn.sh 文件，然后在文件中贴入以下脚本：</p><pre><code class="BASH">#!/bin/bash########################################## 鉴黄脚本# @see https://cloud.tencent.com/document/product/460/6900########################################## 图片鉴黄 API 地址END_POINT=&#39;https://service.image.myqcloud.com/detection/porn_detect&#39;# 使用帮助function usage() {  echo &quot;&quot;  echo &quot;-h --help&quot;  echo &quot;-r --remote-image=网络图片地址&quot;  echo &quot;-l --local-image=本地图片地址&quot;  echo &quot;&quot;}# 对网络图片进行鉴黄function detect_remote() {  remote_image=$1  curl -X POST \       -H &quot;Content-Type: application/json&quot; \       -H &quot;Authorization: $AUTH_SIGN&quot; \       -d &#39;{&quot;appid&quot;:&#39;$APP_ID&#39;,&quot;bucket&quot;:&quot;&#39;$BUCKET_NAME&#39;&quot;,&quot;url_list&quot;:[&quot;&#39;$remote_image&#39;&quot;]}&#39; \       --silent \       $END_POINT}# 对本地图片进行鉴黄function detect_local() {  local_image=$1  curl -X POST \       -H &quot;Content-Type: multipart/form-data&quot; \       -H &quot;Authorization: $AUTH_SIGN&quot; \       -F &quot;appid=$APP_ID&quot; \       -F &quot;bucket=$BUCKET_NAME&quot; \       -F &quot;image[0]=@$local_image&quot; \       --silent \       $END_POINT}# 解析命令入参while [ &quot;$1&quot; != &quot;&quot; ]; do  PARAM=`echo $1 | awk -F= &#39;{print $1}&#39;`  VALUE=`echo $1 | awk -F= &#39;{print $2}&#39;`  case $PARAM in    -h | --help)      usage      exit      ;;    -r | --remote-image)      detect_remote $VALUE      ;;    -l | --local-image)      detect_local $VALUE      ;;    *)      echo &quot;ERROR: 未知参数 \&quot;$PARAM\&quot;&quot;      exit 1      ;;  esac  shiftdone</code></pre><p>完成后测试该脚本是否可以正常运行<br><code>bash detect-porn.sh --remote-image=&#39;https://imgcache.qq.com/open_proj/proj_qcloud_v2/gateway/event/pc/ci-identify/css/img/demo/demo_8.jpg&#39;</code><br>如果出现Code：5可以再次先后执行<code>source init.sh</code>和<code>source gen-sign.sh</code>。<br>在每次重启设备后也要重新执行<code>source init.sh</code>和<code>source gen-sign.sh</code>。{测试于Raspbian树莓派}<br>2019最后一篇，再祝新年快乐！</p>]]></content>
      
      
      <categories>
          
          <category> Shell </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo站点部署教程</title>
      <link href="/build-hexo-web.html/"/>
      <url>/build-hexo-web.html/</url>
      
        <content type="html"><![CDATA[<h2 id="准备本地环境"><a href="#准备本地环境" class="headerlink" title="准备本地环境"></a>准备本地环境</h2><h3 id="Nodejs"><a href="#Nodejs" class="headerlink" title="Nodejs"></a>Nodejs</h3><p>在Node.js官网下载长期支持的Windows版本Node.js。</p><h3 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h3><p>在Git官网下载Windows版Git</p><a id="more"></a><h2 id="部署到Github-腾讯云COS"><a href="#部署到Github-腾讯云COS" class="headerlink" title="部署到Github/腾讯云COS"></a>部署到Github/腾讯云COS</h2><h3 id="Github"><a href="#Github" class="headerlink" title="Github"></a>Github</h3><p>登陆Github创建一个新的仓库，并命名为: <em>你的用户名.github.io</em><br><img src="https://cdn.jsdelivr.net/gh/MengXin001/CDN/pic/Repository%20name.png" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/MengXin001/CDN/pic/Repository%20name.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="仓库命名"><br>打开刚刚安装Git的目录，运行Git-bash。</p><pre><code class="BASH">输入 ssh-keygen -t rsa -C &quot;你的Github账号邮箱地址&quot;</code></pre><p>接下来一直回车，最后提示ssh密钥已经保存在C://Users/电脑用户名/.ssh目录下面。<br>打开.pub文件，复制内容到Github的用户-个人设置-SSH and GPG Keys-SSH keys里面。选择Add ssh key。</p><h3 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h3><p>在本地新建一个文件夹并将Sakura主题文件复制到这个文件夹内<br>进入命令行cd到新建文件夹</p><pre><code class="BASH">执行 npm install hexo-cli -g</code></pre><p>Hexo安装成功后安装npm的依赖。</p><pre><code class="BASH">npm install</code></pre><p>Hexo已经在本地安装完成，在命令行执行：</p><pre><code class="BASH">hexo s</code></pre><p>就可以在<a href="http://localhost中预览当前网页。" target="_blank" rel="noopener">http://localhost中预览当前网页。</a></p><h4 id="主题的基本设置"><a href="#主题的基本设置" class="headerlink" title="主题的基本设置"></a>主题的基本设置</h4><blockquote><p>博客根目录下的_config配置<br>以下引用自主题作者的Github说明文档，<a href="https://github.com/honjun/hexo-theme-sakura/blob/master/README-zh_cn.md" target="_blank" rel="noopener">原文</a></p></blockquote><p>站点</p><pre><code class="yml"># Sitetitle: 你的站点名subtitle:description: 站点简介keywords:author: 作者名language: zh-cntimezone:</code></pre><p>部署</p><pre><code class="yml">deploy:  type: git  repo:     github: 你的github仓库地址    # coding: 你的coding仓库地址  branch: master</code></pre><p>备份 （使用hexo b发布备份到远程仓库）</p><pre><code class="yml">backup:  type: git  message: backup my blog of https://honjun.github.io/  repository:    # 你的github仓库地址,备份分支名  （建议新建backup分支）    github: https://github.com/honjun/honjun.github.io.git,backup    # coding: https://git.coding.net/hojun/hojun.git,backup</code></pre><h4 id="主题目录下的-config配置"><a href="#主题目录下的-config配置" class="headerlink" title="主题目录下的_config配置"></a>主题目录下的_config配置</h4><p>其中标明【改】的是需要修改部门，标明【选】是可改可不改，标明【非】是不用改的部分</p><pre><code class="yml"># site name# 站点名 【改】prefixName: さくら荘そのsiteName: hojun# favicon and site master avatar# 站点的favicon和头像 输入图片路径（下面的配置是都是cdn的相对路径，没有cdn请填写完整路径，建议使用jsdeliver搭建一个cdn啦，先去下载我的cdn替换下图片就行了，简单方便~）【改】favicon: /images/favicon.icoavatar: /img/custom/avatar.jpg# 站点url 【改】url: https://sakura.hojun.cn# 站点介绍（或者说是个人签名）【改】description: Live your life with passion! With some drive!# 站点cdn，没有就为空 【改】  若是cdn为空，一些图片地址就要填完整地址了，比如之前avatar就要填https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/custom/avatar.jpgcdn: https://cdn.jsdelivr.net/gh/honjun/cdn@1.6# 开启pjax 【选】pjax: 1# 站点首页的公告信息 【改】notice: hexo-Sakura主题已经开源，目前正在开发中...# 懒加载的加载中图片 【选】lazyloadImg: https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg# 站点菜单配置 【选】menus:  首页: { path: /, fa: fa-fort-awesome faa-shake }  归档: { path: /archives, fa: fa-archive faa-shake, submenus: {     技术: {path: /categories/技术/, fa: fa-code },     生活: {path: /categories/生活/, fa: fa-file-text-o },     资源: {path: /categories/资源/, fa: fa-cloud-download },     随想: {path: /categories/随想/, fa: fa-commenting-o },    转载: {path: /categories/转载/, fa: fa-book }  } }  清单: { path: javascript:;, fa: fa-list-ul faa-vertical, submenus: {     书单: {path: /tags/悦读/, fa: fa-th-list faa-bounce },     番组: {path: /bangumi/, fa: fa-film faa-vertical },     歌单: {path: /music/, fa: fa-headphones },    图集: {path: /tags/图集/, fa: fa-photo }  } }  留言板: { path: /comment/, fa: fa-pencil-square-o faa-tada }  友人帐: { path: /links/, fa: fa-link faa-shake }  赞赏: { path: /donate/, fa: fa-heart faa-pulse }  关于: { path: /, fa: fa-leaf faa-wrench , submenus: {     我？: {path: /about/, fa: fa-meetup},     主题: {path: /theme-sakura/, fa: iconfont icon-sakura },    Lab: {path: /lab/, fa: fa-cogs },  } }  客户端: { path: /client/, fa: fa-android faa-vertical }  RSS: { path: /atom.xml, fa: fa-rss faa-pulse }# Home page sort type: -1: newer first，1: older first. 【非】homePageSortType: -1# Home page article shown number) 【非】homeArticleShown: 10# 背景图片 【选】bgn: 8# startdash面板 url, title, desc img 【改】startdash:   - {url: /theme-sakura/, title: Sakura, desc: 本站 hexo 主题, img: /img/startdash/sakura.md.png}  - {url: http://space.bilibili.com/271849279, title: Bilibili, desc: 博主的b站视频, img: /img/startdash/bilibili.jpg}  - {url: /, title: hojun的万事屋, desc: 技术服务, img: /img/startdash/wangshiwu.jpg}# your site build time or founded date# 你的站点建立日期 【改】siteBuildingTime: 07/17/2018# 社交按钮(social)  url, img PC端配置 【改】social:  github: {url: http://github.com/honjun, img: /img/social/github.png}  sina: {url: http://weibo.com/mashirozx?is_all=1, img: /img/social/sina.png}  wangyiyun: {url: http://weibo.com/mashirozx?is_all=1, img: /img/social/wangyiyun.png}  zhihu: {url: http://weibo.com/mashirozx?is_all=1, img: /img/social/zhihu.png}  email: {url: http://weibo.com/mashirozx?is_all=1, img: /img/social/email.svg}  wechat: {url: /#, qrcode: /img/custom/wechat.jpg, img: /img/social/wechat.png}# 社交按钮(msocial)  url, img 移动端配置 【改】msocial:  github: {url: http://github.com/honjun, fa: fa-github, color: 333}  weibo: {url: http://weibo.com/mashirozx?is_all=1, fa: fa-weibo, color: dd4b39}  qq: {url: https://wpa.qq.com/msgrd?v=3&amp;uin=954655431&amp;site=qq&amp;menu=yes, fa: fa-qq, color: 25c6fe}# 赞赏二维码（其中wechatSQ是赞赏单页面的赞赏码图片）【改】donate:  alipay: /img/custom/donate/AliPayQR.jpg  wechat: /img/custom/donate/WeChanQR.jpg  wechatSQ: /img/custom/donate/WeChanSQ.jpg# 首页视频地址为https://cdn.jsdelivr.net/gh/honjun/hojun@1.2/Unbroken.mp4，配置如下 【改】movies:  url: https://cdn.jsdelivr.net/gh/honjun/hojun@1.2  # 多个视频用逗号隔开，随机获取。支持的格式目前已知MP4,Flv。其他的可以试下，不保证有用  name: Unbroken.mp4# 左下角aplayer播放器配置 主要改id和server这两项，修改详见[aplayer文档] 【改】aplayer:   id: 2660651585  server: netease  type: playlist  fixed: true  mini: false  autoplay: false  loop: all  order: random  preload: auto  volume: 0.7  mutex: true# Valine评论配置【改】valine: truev_appId: GyC3NzMvd0hT9Yyd2hYIC0MN-gzGzoHszv_appKey: mgOpfzbkHYqU92CV4IDlAUHQ</code></pre><h4 id="补充："><a href="#补充：" class="headerlink" title="补充："></a>补充：</h4><p>歌单页面设置</p><pre><code class="yml">---title: musicdate: 2018-12-20 23:14:28keywords: 喜欢的音乐description: comments: truephotos: 背景图地址---&lt;iframe frameborder=&quot;no&quot; border=&quot;0&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; width=100% height=450 src=&quot;//music.163.com/outchain/player?type=0&amp;id=网易云音乐歌单ID&amp;auto=1&amp;height=430&quot;&gt;&lt;/iframe&gt;</code></pre><h3 id="部署到Github"><a href="#部署到Github" class="headerlink" title="部署到Github"></a>部署到Github</h3><p>执行</p><pre><code class="BASH">hexo g //生成静态页hexo d //部署到仓库</code></pre><p>第一次推送会提示输入Github用户名和密码并配置相关信息<br>推送成功即显示<strong>Deploy done</strong></p><h3 id="绑定自己的域名"><a href="#绑定自己的域名" class="headerlink" title="绑定自己的域名"></a>绑定自己的域名</h3><p>现在你可以用xxx.github.io访问你的站点或者绑定自己的域名来访问<br>在source目录下新建一个文件（无后缀）:CNAME<br>用NotePad(能编辑这个文件的软件就可以)编辑内容为：你要绑定这个博客的域名。同时进入仓库-Settings拉到下面Custom Domain输入上边填写的域名。</p><h3 id="腾讯云部署和CDN使用"><a href="#腾讯云部署和CDN使用" class="headerlink" title="腾讯云部署和CDN使用"></a>腾讯云部署和CDN使用</h3><h4 id="COS"><a href="#COS" class="headerlink" title="COS"></a>COS</h4><p>腾讯云COS部署你可能需要一个备案的域名，其提供50G免费额度存储+10GCDN流量/月+100w次请求(免费额度请以官网为准)。<br>你可以使用npm安装hexo的cos部署插件或者直接上传本地生成的public文件夹内容到存储桶内。<br>腾讯云对象存储的地域对访问速度影响不大。我同时用了成都，广州和北京三个地区的存储(因为之前成都服务区开放可以再嫖到50G的免费存储），在不开CDN的情况下下载大文件可以达到13M/s。</p><h4 id="CDN"><a href="#CDN" class="headerlink" title="CDN"></a>CDN</h4><p>在Wordpress主站上用的是阿里云的全站内容动态加速，Hexo则用静态的CDN加速。这个站点用的是CloudFlare的CDN，对于国内访问延迟还是较大平均500ms但加载速度已经比GithubPage快很多了。用CF还是因为可以AntiDDoS，用Ali那是真的可以硬抗到流量用完。<br>你可以采用整站接入CDN，把绑定的域名绑定到CF上，再选择Proxy模式解析GithubPage。或者把页面里的图片/视频/Js;css等文件放到对象存储里，加载网页时从对象存储里获取。</p><h3 id="备份"><a href="#备份" class="headerlink" title="备份"></a>备份</h3><p>备份到远程仓库如腾讯云的工蜂Git(原代码托管?)，Github仓库，码云……</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
